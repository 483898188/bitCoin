1. 启动regtest节点

```shell
./bitcoind -regtest -daemon

```



2. 加载已有钱包

```shell
./bitcoin-cli -regtest loadwallet test

```



3. 生成测试币

```shell
ADDR=$(./bitcoin-cli -regtest getnewaddress)
./bitcoin-cli -regtest generatetoaddress 101 $ADDR

```



4. 查看钱包

   ```shell
   hxl@hxl:~/bitcoin/build/bin$ ./bitcoin-cli -regtest getbalance
   5100.00000000
   
   ```

   

5. 生成一个新地址

   ```shell
   hxl@hxl:~/bitcoin/build/bin$ ADDR2=$(./bitcoin-cli -regtest getnewaddress)
   echo $ADDR2
   bcrt1quq4lu2xfqtskmkzm8pq3r9rknv996ckv7z7mkg
   
   ```



7. 交易

```shell
hxl@hxl:~/bitcoin/build/bin$ ADDR2=$(./bitcoin-cli -regtest getnewaddress)
./bitcoin-cli -regtest sendtoaddress $ADDR2 10
42dc937d66c58c235a3fbcf55eb5644117ea0e058cc91bef834c07a63ef4f570


# 交易id （txid）为 42dc937d66c58c235a3fbcf55eb5644117ea0e058cc91bef834c07a63ef4f570

```



8. 查看交易详情

```shell
./bitcoin-cli -regtest gettransaction 42dc937d66c58c235a3fbcf55eb5644117ea0e058cc91bef834c07a63ef4f570
```

  返回结果

```shell
{
  "amount": 0.00000000,
  "fee": -0.00002820,
  "confirmations": 0,
  "trusted": true,
  "txid": "42dc937d66c58c235a3fbcf55eb5644117ea0e058cc91bef834c07a63ef4f570",
  "wtxid": "083cb59a00090980a22a58f1e2dcf39885292c32dd97e716ea604f973d7b7192",
  "walletconflicts": [
  ],
  "mempoolconflicts": [
  ],
  "time": 1756365015,
  "timereceived": 1756365015,
  "bip125-replaceable": "yes",
  "details": [
    {
      "address": "bcrt1q7f5vqaff0ttng2c5pwy63gsetgec0ag4ujktdf",
      "category": "send",
      "amount": -10.00000000,
      "label": "",
      "vout": 0,
      "fee": -0.00002820,
      "abandoned": false
    },
    {
      "address": "bcrt1q7f5vqaff0ttng2c5pwy63gsetgec0ag4ujktdf",
      "parent_descs": [
        "wpkh([08972d12/84h/1h/0h]tpubDC8SJtzsAzCsuxuAgDxLuC8a86iswX7XSSMSbMjkoJQ1uceTb8J1Be93iBcigGsXhvVjkAc41J3aSWzsZaNf8ufycro2ffVaCfEq5AzcSqH/0/*)#a2fvhjeu"
      ],
      "category": "receive",
      "amount": 10.00000000,
      "label": "",
      "vout": 0,
      "abandoned": false
    }
  ],
  "hex": "02000000000101378ed02b4a4e3b5dfdc2458759849ea9acb50ba8bf26525d84468a20678f83e70000000000fdffffff0200ca9a3b00000000160014f268c075297ad7342b140b89a8a2195a3387f515fc1c6bee0000000016001489ae9148e4ed6d65b267b8671a7197935b03d50f024730440220732222c432ec72735c1fdcbb5c183a018e21ef6760f1276e8490be1a6735700202206cf4a89ba0bf2b18abd216b11c2d3a1c948738721374955a9be60a6ea453ef17012102821155b473db3f32b2180f96f71556b114f12db62f28e1a07d5dad6515d8f68bca000000",
  "lastprocessedblock": {
    "hash": "4b97bda9de0096a7a28f0c629c8fa8cfdc8a0500b712bf140f331ad629e3f765",
    "height": 202
  }
}

```



9. 查看未确定交易池(mempool) 里是不是有

```shell
hxl@hxl:~/bitcoin/build/bin$ ./bitcoin-cli -regtest getrawmempool
```

返回结果

```shell
[
  "42dc937d66c58c235a3fbcf55eb5644117ea0e058cc91bef834c07a63ef4f570"
]

```



10. 打包进区块

```shell
./bitcoin-cli -regtest generatetoaddress 1 $(./bitcoin-cli -regtest getnewaddress)

```

返回结果

```shell
[
  "4951d954f1677f1aac8859bb75c081eff9394896e061c2f31f81210f213d67d5"
]

# 区块哈希值
```



11. 查看交易次数

```shell
./bitcoin-cli -regtest gettransaction 42dc937d66c58c235a3fbcf55eb5644117ea0e058cc91bef834c07a63ef4f570

```

返回结果

```shell
{
  "amount": 0.00000000,
  "fee": -0.00002820,
  "confirmations": 1,
  "blockhash": "4951d954f1677f1aac8859bb75c081eff9394896e061c2f31f81210f213d67d5",
  "blockheight": 203,
  "blockindex": 1,
  "blocktime": 1756365619,
  "txid": "42dc937d66c58c235a3fbcf55eb5644117ea0e058cc91bef834c07a63ef4f570",
  "wtxid": "083cb59a00090980a22a58f1e2dcf39885292c32dd97e716ea604f973d7b7192",
  "walletconflicts": [
  ],
  "mempoolconflicts": [
  ],
  "time": 1756365015,
  "timereceived": 1756365015,
  "bip125-replaceable": "no",
  "details": [
    {
      "address": "bcrt1q7f5vqaff0ttng2c5pwy63gsetgec0ag4ujktdf",
      "category": "send",
      "amount": -10.00000000,
      "label": "",
      "vout": 0,
      "fee": -0.00002820,
      "abandoned": false
    },
    {
      "address": "bcrt1q7f5vqaff0ttng2c5pwy63gsetgec0ag4ujktdf",
      "parent_descs": [
        "wpkh([08972d12/84h/1h/0h]tpubDC8SJtzsAzCsuxuAgDxLuC8a86iswX7XSSMSbMjkoJQ1uceTb8J1Be93iBcigGsXhvVjkAc41J3aSWzsZaNf8ufycro2ffVaCfEq5AzcSqH/0/*)#a2fvhjeu"
      ],
      "category": "receive",
      "amount": 10.00000000,
      "label": "",
      "vout": 0,
      "abandoned": false
    }
  ],
  "hex": "02000000000101378ed02b4a4e3b5dfdc2458759849ea9acb50ba8bf26525d84468a20678f83e70000000000fdffffff0200ca9a3b00000000160014f268c075297ad7342b140b89a8a2195a3387f515fc1c6bee0000000016001489ae9148e4ed6d65b267b8671a7197935b03d50f024730440220732222c432ec72735c1fdcbb5c183a018e21ef6760f1276e8490be1a6735700202206cf4a89ba0bf2b18abd216b11c2d3a1c948738721374955a9be60a6ea453ef17012102821155b473db3f32b2180f96f71556b114f12db62f28e1a07d5dad6515d8f68bca000000",
  "lastprocessedblock": {
    "hash": "4951d954f1677f1aac8859bb75c081eff9394896e061c2f31f81210f213d67d5",
    "height": 203
  }
}

#  "confirmations": 1

```



12. 查看余额 （接收方地址余额）

```shell
hxl@hxl:~/bitcoin/build/bin$ ./bitcoin-cli -regtest getbalance
5149.99997180

```



13. 继续挖区块

```shell
./bitcoin-cli -regtest generatetoaddress 100 $(./bitcoin-cli -regtest getnewaddress)

```



14. 查看最新区块高度

```shell
hxl@hxl:~/bitcoin/build/bin$ ./bitcoin-cli -regtest getblockcount
303

```

15. 确认某笔交易是否打包

```shell
./bitcoin-cli -regtest gettransaction <txid>

```



16. 查看钱包余额

```shell
hxl@hxl:~/bitcoin/build/bin$ ./bitcoin-cli -regtest getbalance
8800.00000000

```



17. 需要继续挖100个区块，才能使用。