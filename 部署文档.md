1. 获取源码

   ```shell
   git clone https://github.com/bitcoin/bitcoin.git
   ```

   

2. 环境准备

   ```shell
   sudo apt update
   sudo apt install build-essential libtool autotools-dev automake pkg-config bsdmainutils python3 \
        libevent-dev libboost-system-dev libboost-filesystem-dev libboost-test-dev \
        libsqlite3-dev
        
   # 钱包功能
   sudo apt install libdb++-dev
   
   # 图形界面
   sudo apt install -y qtbase5-dev qttools5-dev-tools
   
   # 序列化库，主要用于IPC通信
   # 需要 0.9.0版本及以上
   sudo apt update
   sudo apt install -y capnproto libcapnp-dev
   
   
   
   ```

   

   ```shell
   # 源码安装 Cap’n Proto ≥ 0.9.0
   # ubuntu22.04默认是0.8.0， 手动安装新版
   # 删除旧版本
   sudo apt remove -y capnproto libcapnp-dev
   
   # 下载并编译
   cd ~
   wget https://capnproto.org/capnproto-c++-1.0.1.tar.gz
   tar zxf capnproto-c++-1.0.1.tar.gz
   cd capnproto-c++-1.0.1
   ./configure
   make -j$(nproc)
   sudo make install
   sudo ldconfig
   
   # 确认版本
   capnp --version
   
   ```

   

3. 编译

   ```shell
   mkdir ~/bitcoin/build
   cd  ~/bitcoin/build
   cmake ..
   make -j4
   
   ```

   